-- Validate the roleconfig after restore
select rolname, rolconfig from pg_roles where rolname='dsp_role';
 rolname  |                                                                 rolconfig                                                                  
----------+--------------------------------------------------------------------------------------------------------------------------------------------
 dsp_role | {"gp_default_storage_options=appendonly=true, orientation=column, blocksize=65536, checksum=true, compresslevel=4, compresstype=rle_type"}
(1 row)

-- validate the tables's state after restore
\c dsp_db dsp_role
You are now connected to database "dsp_db" as user "dsp_role".
show gp_default_storage_options;
                                       gp_default_storage_options                                       
--------------------------------------------------------------------------------------------------------
 appendonly=true,blocksize=65536,compresstype=rle_type,compresslevel=4,checksum=true,orientation=column
(1 row)

\d+ dsp_db_t1
                              Append-Only Columnar Table "public.dsp_db_t1"
 Column |  Type   | Modifiers | Storage | Compression Type | Compression Level | Block Size | Description 
--------+---------+-----------+---------+------------------+-------------------+------------+-------------
 i      | integer |           | plain   | rle_type         | 4                 | 65536      | 
 j      | integer |           | plain   | rle_type         | 4                 | 65536      | 
Checksum: t
Has OIDs: no
Options: appendonly=true, blocksize=65536, compresstype=rle_type, compresslevel=4, orientation=column
Distributed by: (i)

select relstorage, reloptions,compresstype,columnstore,compresslevel,columnstore,checksum from pg_class c , pg_appendonly a where c.relfilenode=a.relid and c.relname='dsp_db_t1';
 relstorage |                                         reloptions                                         | compresstype | columnstore | compresslevel | columnstore | checksum 
------------+--------------------------------------------------------------------------------------------+--------------+-------------+---------------+-------------+----------
 c          | {appendonly=true,blocksize=65536,compresstype=rle_type,compresslevel=4,orientation=column} | rle_type     | t           |             4 | t           | t
(1 row)

\d+ dsp_db_t2
               Table "public.dsp_db_t2"
 Column |  Type   | Modifiers | Storage | Description 
--------+---------+-----------+---------+-------------
 i      | integer |           | plain   | 
 j      | integer |           | plain   | 
Has OIDs: no
Options: appendonly=false
Distributed by: (i)

select relname, relstorage, reloptions from pg_class where relname='dsp_db_t2';
  relname  | relstorage |     reloptions     
-----------+------------+--------------------
 dsp_db_t2 | h          | {appendonly=false}
(1 row)

\d+ dsp_db_t3
         Append-Only Table "public.dsp_db_t3"
 Column |  Type   | Modifiers | Storage | Description 
--------+---------+-----------+---------+-------------
 i      | integer |           | plain   | 
 j      | integer |           | plain   | 
Compression Type: zlib
Compression Level: 4
Block Size: 65536
Checksum: t
Has OIDs: no
Options: appendonly=true, orientation=row, compresstype=zlib, blocksize=65536, compresslevel=4
Distributed by: (i)

select relstorage, reloptions,compresstype,columnstore,compresslevel,columnstore,checksum from pg_class c , pg_appendonly a where c.relfilenode=a.relid and c.relname='dsp_db_t3';
 relstorage |                                     reloptions                                      | compresstype | columnstore | compresslevel | columnstore | checksum 
------------+-------------------------------------------------------------------------------------+--------------+-------------+---------------+-------------+----------
 a          | {appendonly=true,orientation=row,compresstype=zlib,blocksize=65536,compresslevel=4} | zlib         | f           |             4 | f           | t
(1 row)

\d+ dsp_db_t4
Did not find any relation named "dsp_db_t4".
select relstorage, reloptions,compresstype,columnstore,compresslevel,columnstore,checksum from pg_class c , pg_appendonly a where c.relfilenode=a.relid and c.relname='dsp_db_t4';
 relstorage | reloptions | compresstype | columnstore | compresslevel | columnstore | checksum 
------------+------------+--------------+-------------+---------------+-------------+----------
(0 rows)

